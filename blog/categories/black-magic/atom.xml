<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Black Magic | Striving for Adequacy]]></title>
  <link href="http://calvached.github.io/blog/categories/black-magic/atom.xml" rel="self"/>
  <link href="http://calvached.github.io/"/>
  <updated>2014-06-11T08:58:17-05:00</updated>
  <id>http://calvached.github.io/</id>
  <author>
    <name><![CDATA[Diana Calvache]]></name>
    <email><![CDATA[hello@dianathegeek.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Ruby, Pass by What?]]></title>
    <link href="http://calvached.github.io/blog/2014/06/02/ruby-pass-by-what/"/>
    <updated>2014-06-02T10:12:24-05:00</updated>
    <id>http://calvached.github.io/blog/2014/06/02/ruby-pass-by-what</id>
    <content type="html"><![CDATA[<p><img src="http://i.imgur.com/3gQVzL0.gif" alt="david-tennant-confused" /></p>

<p>There are two questions that have been bugging me lately. The first, <em>Why do I have to clone a guess in Mastermind?</em> and the second came after I did some research, <em>What is pass by reference vs. pass by value?</em></p>

<p>Let&rsquo;s start with the first question.</p>

<!-- more -->


<p>To simplify what I was experiencing here&rsquo;s an example:<br/>
``` ruby Black magic code going on here
class ExampleClass
  def example_method</p>

<pre><code>var = 'woohooo'

var.object_id # Object Id: 70131019948560

x = SomeClass.new
x.some_method(var)
x.return_var # returns 'woohooo'

y = AnotherClass.new
y.another_method(var)

x.return_var # returns 'boohooo', whyyy??
</code></pre>

<p>  end
end</p>

<p>class SomeClass
  def some_method(var)</p>

<pre><code>@new_var = var
</code></pre>

<p>  end</p>

<p>  def return_var</p>

<pre><code>@new_var.object_id # Object Id: 70131019948560

@new_var
</code></pre>

<p>  end
end</p>

<p>class AnotherClass
  def another_method(var)</p>

<pre><code>var[0] = 'b'
var.object_id # Object Id: 70131019948560

var
</code></pre>

<p>  end
end</p>

<p>j = ExampleClass.new
j.example_method
```
So what exactly is going on here? In my ExampleClass I&rsquo;m passing some_method a variable with the value &ldquo;woohooo&rdquo; and I expect it to return the same value (since I&rsquo;m not making any changes), BUT when I call another_method and pass it the same variable it changes the value that&rsquo;s being returned by return_var. What is this sorcery?!<br/>
<img src="http://i.imgur.com/PezBytD.gif" alt="Witchcraft black magic code" /></p>

<p>I could easily solve the problem by using the .clone method which creates a copy of the variable and be on my way, but that&rsquo;s not how I roll. This leads us to my second question, <em>What is pass by reference vs. pass by value?</em></p>

<p>After consulting with my long-time friend, Google, what seems to be going on is that each time I&rsquo;m passing a variable to a method it&rsquo;s not making a copy of the variable, but rather making a copy of the reference to the same object in memory (which is why the Object Ids are all the same). I was absolutely baffled since I had assumed that Ruby makes object copies each time a variable is passed to a method (Oh and by the way this example doesn&rsquo;t work with Fixnum objects, apparently they have &ldquo;immediate value&rdquo; which means that the actual object is passed and not a reference).</p>

<p>In this example we see something a little bit different.<br/>
``` ruby Slightly less bewildering code
def change(x)
  x.object_id # Object Id: 70266982826660
  x = &lsquo;10&rsquo;
  x.object_id # Object Id: 70266982862600</p>

<p>  x
end</p>

<p>y = &lsquo;3&rsquo;
y.object_id # Object Id: 70266982826660</p>

<p>change(y) # returns &lsquo;10&rsquo;
y # returns &lsquo;3&rsquo;
```
I&rsquo;m passing a variable to the change method and while inside the method I&rsquo;m assigning it a different value. This method does exactly what I expect it to, it returns a different value, but it leaves the original variable the same. Why? Because the reference is changed (we can see this by looking at the difference in Object Ids) and the return value is actually a completely different object.</p>

<p>In my first example the referenced object value was changed, but in the second example the reference itself was changed. Like I said&hellip;witchcraft!</p>

<p>Here&rsquo;s a really great simple analogy that I found.<br/>
<blockquote><p>Say I want to share a web page with you.</p></p><p><p>If I tell you the URL, I&rsquo;m passing by reference. You can use that URL to see the same web page I can see. If that page is changed, we both see the changes. If you delete the URL, all you&rsquo;re doing is destroying your reference to that page &ndash; you&rsquo;re not deleting the actual page itself.</p></p><p><p>If I print out the page and give you the printout, I&rsquo;m passing by value. Your page is a disconnected copy of the original. You won&rsquo;t see any subsequent changes, and any changes that you make (e.g. scribbling on your printout) will not show up on the original page. If you destroy the printout, you have actually destroyed your copy of the object &ndash; but the original web page remains intact.</p><footer><strong>Dylan Beattie <a href="http://stackoverflow.com/a/430958">http://stackoverflow.com/a/430958</a> StackOverflow</strong></footer></blockquote></p>

<p>TL;DR Ruby is Pass by Value because a copy of a reference to an object is passed and not the object itself.</p>
]]></content>
  </entry>
  
</feed>
